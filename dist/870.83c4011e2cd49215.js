"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[870],{67870:(ot,S,i)=>{i.r(S),i.d(S,{NotaSalidaModule:()=>et});var m=i(60177),b=i(18498),l=i(89417),s=i(9159),d=i(34006),t=i(17705),N=i(97405),p=i(52920),f=i(88834),C=i(86467),y=i(99631),v=i(86600),F=i(82798);function $(o,r){if(1&o&&(t.j41(0,"mat-option",11),t.EFF(1),t.k0s()),2&o){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(1),t.SpI(" ",e.nombre," ")}}function M(o,r){if(1&o&&(t.j41(0,"button",12),t.EFF(1,"Crear Nota de Salida "),t.k0s()),2&o){const e=t.XpG();t.Y8G("disabled",!e.form.valid)}}function k(o,r){if(1&o&&(t.j41(0,"button",12),t.EFF(1,"Actualizar Nota de Salida "),t.k0s()),2&o){const e=t.XpG();t.Y8G("disabled",!e.form.valid)}}let j=(()=>{class o{constructor(e,a,n){this.defaults=e,this.dialogRef=a,this.apiClient=n,this.mode="create",this.productosList=[]}ngOnInit(){if(this.defaults){this.mode="update";const e=this.defaults.fecha.split("/");this.defaults.fecha=`${e[2]}-${e[1]}-${e[0]}`}else this.defaults={};this.form=new l.J3({idProducto:new l.hs(this.defaults.idProducto),fecha:new l.hs(this.defaults.fecha),cantidad:new l.hs(this.defaults.cantidad),motivo:new l.hs(this.defaults.motivo)}),this.apiClient.getRequest("/api/producto").subscribe({next:e=>{this.productosList=e,console.info(e)},error:e=>{console.error(e)}})}save(){console.log(this.form.value),"create"===this.mode?this.createCustomer():"update"===this.mode&&this.updateCustomer()}createCustomer(){this.dialogRef.close(this.form.value)}updateCustomer(){const e=this.form.value;e.id=this.defaults.id,this.dialogRef.close(e)}isCreateMode(){return"create"===this.mode}isUpdateMode(){return"update"===this.mode}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(d.Vh),t.rXU(d.CP),t.rXU(N.f))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["fury-crear-actualizar-nota-salida"]],decls:25,vars:5,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["fxLayout","column wrap"],["formControlName","idProducto"],[3,"value",4,"ngFor","ngForOf"],["fxFlex",""],["type","date","formControlName","fecha","matInput",""],["type","text","formControlName","cantidad","matInput",""],["type","text","formControlName","motivo","matInput",""],["fxLayout","row","fxLayoutAlign","end center"],["mat-flat-button","","color","primary",3,"disabled",4,"ngIf"],[3,"value"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(a,n){1&a&&(t.j41(0,"div",0),t.EFF(1),t.k0s(),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return n.save()}),t.j41(3,"mat-dialog-content")(4,"div",2)(5,"mat-form-field")(6,"mat-label"),t.EFF(7,"Productos"),t.k0s(),t.j41(8,"mat-select",3),t.DNE(9,$,2,2,"mat-option",4),t.k0s()(),t.j41(10,"mat-form-field",5)(11,"mat-label"),t.EFF(12,"Fecha"),t.k0s(),t.nrm(13,"input",6),t.k0s(),t.j41(14,"mat-form-field",5)(15,"mat-label"),t.EFF(16,"Cantidad"),t.k0s(),t.nrm(17,"input",7),t.k0s(),t.j41(18,"mat-form-field",5)(19,"mat-label"),t.EFF(20,"Motivo"),t.k0s(),t.nrm(21,"input",8),t.k0s()()(),t.j41(22,"mat-dialog-actions",9),t.DNE(23,M,2,1,"button",10),t.DNE(24,k,2,1,"button",10),t.k0s()()),2&a&&(t.R7$(1),t.SpI("",n.isCreateMode()?"Crear":"Actualizar"," Nota de Salida"),t.R7$(1),t.Y8G("formGroup",n.form),t.R7$(7),t.Y8G("ngForOf",n.productosList),t.R7$(14),t.Y8G("ngIf",n.isCreateMode()),t.R7$(1),t.Y8G("ngIf",n.isUpdateMode()))},dependencies:[m.Sq,m.bT,p.DJ,p.sA,p.UI,l.qT,l.me,l.BC,l.cb,f.$z,d.BI,d.Yi,d.E7,C.rl,C.nJ,y.fg,l.j4,l.JD,v.wT,F.VO]})}}return o})();var G=i(16881),T=i(74061),E=i(75063),x=i(82765),D=i(99213),h=i(59115),R=i(96695),g=i(2042),I=i(43655),Y=i(53007),P=i(15551);function _(o,r){1&o&&(t.j41(0,"th",15)(1,"mat-checkbox",16),t.bIt("click",function(a){return a.stopPropagation()}),t.k0s()())}function z(o,r){1&o&&(t.j41(0,"td",17)(1,"mat-checkbox",16),t.bIt("click",function(a){return a.stopPropagation()}),t.k0s()())}function A(o,r){if(1&o&&(t.j41(0,"th",22),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",e.name,"")}}function V(o,r){if(1&o&&(t.j41(0,"td",23),t.EFF(1),t.k0s()),2&o){const e=r.$implicit,a=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",e[a.property]," ")}}function X(o,r){if(1&o&&(t.qex(0,19),t.DNE(1,A,2,1,"th",20),t.DNE(2,V,2,1,"td",21),t.bVm()),2&o){const e=t.XpG().$implicit;t.Y8G("matColumnDef",e.property)}}function U(o,r){if(1&o&&(t.qex(0),t.DNE(1,X,3,1,"ng-container",18),t.bVm()),2&o){const e=r.$implicit;t.R7$(1),t.Y8G("ngIf",e.isModelProperty)}}function B(o,r){1&o&&t.nrm(0,"th",24)}function L(o,r){if(1&o){const e=t.RV6();t.j41(0,"td",17)(1,"button",25),t.bIt("click",function(n){return n.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_horiz"),t.k0s()(),t.j41(4,"mat-menu",26,27)(6,"button",28),t.bIt("click",function(){const c=t.eBV(e).$implicit,u=t.XpG();return t.Njj(u.updateNotaSalida(c))}),t.j41(7,"span"),t.EFF(8,"Modify"),t.k0s()(),t.j41(9,"button",28),t.bIt("click",function(){const c=t.eBV(e).$implicit,u=t.XpG();return t.Njj(u.deleteNotaSalida(c))}),t.j41(10,"span"),t.EFF(11,"Delete"),t.k0s()()()()}if(2&o){const e=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",e)}}function O(o,r){1&o&&t.nrm(0,"tr",29)}function w(o,r){if(1&o){const e=t.RV6();t.j41(0,"tr",30),t.bIt("click",function(){const c=t.eBV(e).$implicit,u=t.XpG();return t.Njj(u.updateNotaSalida(c))}),t.k0s()}}const H=function(){return["Notas de Salida"]},J=function(){return[]},Z=[{path:"",component:(()=>{class o{get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}constructor(e,a){this.apiClient=e,this.dialog=a,this.dataSource=new s.I6([]),this.columns=[{name:"ID",property:"id",visible:!0,isModelProperty:!0},{name:"Fecha",property:"fecha",visible:!0,isModelProperty:!0},{name:"Producto",property:"nombreProducto",visible:!0,isModelProperty:!0},{name:"Cantidad",property:"cantidad",visible:!0,isModelProperty:!0},{name:"Motivo",property:"motivo",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10,this.form=new l.gE({})}ngOnInit(){this.getNotasSalida()}getNotasSalida(){this.apiClient.getRequest("/api/notasalida").subscribe({next:e=>{this.dataSource.data=e,console.log(e)},error:e=>{console.error(e)}})}createNotaSalida(){console.info("Abre dialogo"),this.dialog.open(j,{width:"400px"}).afterClosed().subscribe(e=>{e?(console.info("Al cerrar",e),e.fecha&&(e.fecha=(0,m.Yq)(e.fecha,"dd/MM/yyyy","en")),this.apiClient.postRequest("/api/notasalida",e).subscribe({next:a=>{console.info("OK",a),this.getNotasSalida()},error:a=>{console.error("error",a)}}),console.info("Fin api call")):console.info("Cancelado")}),console.info("Fin Metodo")}deleteNotaSalida(e){this.apiClient.deleteRequest(e.id,"/api/notasalida").subscribe({next:a=>{this.getNotasSalida()},error:a=>{}})}updateNotaSalida(e){console.info(e);const a=(0,G.A)(e);console.info("rowCopy",a),this.dialog.open(j,{data:a,width:"400px"}).afterClosed().subscribe(n=>{n?(n.fecha&&(n.fecha=(0,m.Yq)(n.fecha,"dd/MM/yyyy","en")),this.apiClient.putRequest("/api/notasalida",n.id,n).subscribe({next:c=>{this.getNotasSalida()},error:c=>{console.error(c)}})):console.info("Cancelado")})}onFilterChange(e){console.info(event),this.dataSource&&(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(N.f),t.rXU(d.bZ))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["fury-nota-salida"]],decls:20,vars:9,consts:[["mode","card"],["current","Nota de Salida",3,"crumbs"],["name","Nota de Salida",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(a,n){1&a&&(t.j41(0,"fury-page-layout",0)(1,"fury-page-layout-header"),t.nrm(2,"fury-breadcrumbs",1),t.k0s(),t.j41(3,"fury-page-layout-content")(4,"fury-list",2),t.bIt("filterChange",function(u){return n.onFilterChange(u)}),t.j41(5,"div",3)(6,"button",4),t.bIt("click",function(){return n.createNotaSalida()}),t.j41(7,"mat-icon"),t.EFF(8,"add"),t.k0s()()(),t.j41(9,"table",5),t.qex(10,6),t.DNE(11,_,2,0,"th",7),t.DNE(12,z,2,0,"td",8),t.bVm(),t.DNE(13,U,2,1,"ng-container",9),t.qex(14,10),t.DNE(15,B,1,0,"th",11),t.DNE(16,L,12,1,"td",8),t.bVm(),t.DNE(17,O,1,0,"tr",12),t.DNE(18,w,1,0,"tr",13),t.k0s(),t.nrm(19,"mat-paginator",14),t.k0s()()()),2&a&&(t.R7$(2),t.Y8G("crumbs",t.lJ4(7,H)),t.R7$(2),t.Y8G("columns",t.lJ4(8,J)),t.R7$(5),t.Y8G("dataSource",n.dataSource),t.R7$(4),t.Y8G("ngForOf",n.columns),t.R7$(4),t.Y8G("matHeaderRowDef",n.visibleColumns),t.R7$(1),t.Y8G("matRowDefColumns",n.visibleColumns),t.R7$(1),t.Y8G("pageSize",n.pageSize))},dependencies:[m.Sq,m.bT,T.m,E.s,f.iY,f.$0,x.So,D.An,h.kk,h.fb,h.Cp,R.iy,g.B4,g.aE,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,I.T,Y.M,P.M]})}}return o})()}];let K=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[b.iI.forChild(Z),b.iI]})}}return o})();var Q=i(3632),W=i(91398),q=i(49320);let tt=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[m.MD,p.w2,l.YN,f.Hl,d.hM,C.RG,y.fS,l.X1,v.Sy,F.Ve]})}}return o})(),et=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[m.MD,K,Q.V,W.H,f.Hl,x.g7,D.m_,h.Cn,R.Ou,g.NQ,s.tP,q.S,tt]})}}return o})()}}]);