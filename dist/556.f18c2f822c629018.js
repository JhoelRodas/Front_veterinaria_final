"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[556],{30556:(et,b,a)=>{a.r(b),a.d(b,{AgendaModule:()=>tt});var m=a(60177),y=a(18498),l=a(9159),s=a(89417),d=a(34006),t=a(17705),p=a(52920),f=a(88834),h=a(86467),A=a(99631);function D(n,r){1&n&&(t.j41(0,"mat-form-field",4)(1,"mat-label"),t.EFF(2,"Cliente"),t.k0s(),t.nrm(3,"input",11),t.k0s())}function k(n,r){1&n&&(t.j41(0,"mat-form-field",4)(1,"mat-label"),t.EFF(2,"Ci"),t.k0s(),t.nrm(3,"input",12),t.k0s())}function R(n,r){if(1&n&&(t.j41(0,"button",13),t.EFF(1,"Registrar Agenda "),t.k0s()),2&n){const e=t.XpG();t.Y8G("disabled",!e.form.valid)}}function I(n,r){if(1&n&&(t.j41(0,"button",13),t.EFF(1,"Actualizar Agenda "),t.k0s()),2&n){const e=t.XpG();t.Y8G("disabled",!e.form.valid)}}let v=(()=>{class n{constructor(e,o){this.defaults=e,this.dialogRef=o,this.mode="create"}ngOnInit(){if(this.defaults){this.mode="update";const e=this.defaults.fecha.split("/");this.defaults.fecha=`${e[2]}-${e[1]}-${e[0]}`}else this.defaults={};this.form=new s.J3({cliente:new s.hs(this.defaults.cliente),ci:new s.hs(this.defaults.ci),fecha:new s.hs(this.defaults.fecha),hora:new s.hs(this.defaults.hora),descripcion:new s.hs(this.defaults.descripcion),estado:new s.hs(this.defaults.estado)})}save(){console.log(this.form.value),"create"===this.mode?this.createCustomer():"update"===this.mode&&this.updateCustomer()}createCustomer(){this.dialogRef.close(this.form.value)}updateCustomer(){const e=this.form.value;e.id=this.defaults.id,this.dialogRef.close(e)}isCreateMode(){return"create"===this.mode}isUpdateMode(){return"update"===this.mode}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(d.Vh),t.rXU(d.CP))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["fury-crear-actualizar-agenda"]],decls:26,vars:6,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["fxLayout","column wrap"],["fxFlex","",4,"ngIf"],["fxFlex",""],["type","date","formControlName","fecha","matInput",""],["type","time","formControlName","hora","matInput",""],["type","text","formControlName","descripcion","matInput",""],["type","text","formControlName","estado","matInput",""],["fxLayout","row","fxLayoutAlign","end center"],["mat-flat-button","","color","primary",3,"disabled",4,"ngIf"],["type","text","formControlName","cliente","matInput",""],["type","text","formControlName","ci","matInput",""],["mat-flat-button","","color","primary",3,"disabled"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.EFF(1),t.k0s(),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return i.save()}),t.j41(3,"mat-dialog-content")(4,"div",2),t.DNE(5,D,4,0,"mat-form-field",3),t.DNE(6,k,4,0,"mat-form-field",3),t.j41(7,"mat-form-field",4)(8,"mat-label"),t.EFF(9,"Fecha"),t.k0s(),t.nrm(10,"input",5),t.k0s(),t.j41(11,"mat-form-field",4)(12,"mat-label"),t.EFF(13,"Hora"),t.k0s(),t.nrm(14,"input",6),t.k0s(),t.j41(15,"mat-form-field",4)(16,"mat-label"),t.EFF(17,"Descripcion"),t.k0s(),t.nrm(18,"input",7),t.k0s(),t.j41(19,"mat-form-field",4)(20,"mat-label"),t.EFF(21,"Estado"),t.k0s(),t.nrm(22,"input",8),t.k0s()()(),t.j41(23,"mat-dialog-actions",9),t.DNE(24,R,2,1,"button",10),t.DNE(25,I,2,1,"button",10),t.k0s()()),2&o&&(t.R7$(1),t.SpI("",i.isCreateMode()?"Crear":"Actualizar"," Agenda"),t.R7$(1),t.Y8G("formGroup",i.form),t.R7$(3),t.Y8G("ngIf","update"!=i.mode),t.R7$(1),t.Y8G("ngIf","update"!=i.mode),t.R7$(18),t.Y8G("ngIf",i.isCreateMode()),t.R7$(1),t.Y8G("ngIf",i.isUpdateMode()))},dependencies:[m.bT,p.DJ,p.sA,p.UI,f.$z,d.BI,d.Yi,d.E7,h.rl,h.nJ,A.fg,s.qT,s.me,s.BC,s.cb,s.j4,s.JD]})}}return n})();var $=a(16881),E=a(97405),_=a(74061),G=a(75063),F=a(82765),x=a(99213),g=a(59115),j=a(96695),C=a(2042),M=a(43655),T=a(53007),N=a(15551);function S(n,r){1&n&&(t.j41(0,"th",15)(1,"mat-checkbox",16),t.bIt("click",function(o){return o.stopPropagation()}),t.k0s()())}function Y(n,r){1&n&&(t.j41(0,"td",17)(1,"mat-checkbox",16),t.bIt("click",function(o){return o.stopPropagation()}),t.k0s()())}function z(n,r){if(1&n&&(t.j41(0,"th",22),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",e.name,"")}}function P(n,r){if(1&n&&(t.j41(0,"td",23),t.EFF(1),t.k0s()),2&n){const e=r.$implicit,o=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",e[o.property]," ")}}function V(n,r){if(1&n&&(t.qex(0,19),t.DNE(1,z,2,1,"th",20),t.DNE(2,P,2,1,"td",21),t.bVm()),2&n){const e=t.XpG().$implicit;t.Y8G("matColumnDef",e.property)}}function X(n,r){if(1&n&&(t.qex(0),t.DNE(1,V,3,1,"ng-container",18),t.bVm()),2&n){const e=r.$implicit;t.R7$(1),t.Y8G("ngIf",e.isModelProperty)}}function H(n,r){1&n&&t.nrm(0,"th",24)}function w(n,r){if(1&n){const e=t.RV6();t.j41(0,"td",17)(1,"button",25),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_horiz"),t.k0s()(),t.j41(4,"mat-menu",26,27)(6,"button",28),t.bIt("click",function(){const c=t.eBV(e).$implicit,u=t.XpG();return t.Njj(u.updateAgenda(c))}),t.j41(7,"span"),t.EFF(8,"Modify"),t.k0s()(),t.j41(9,"button",28),t.bIt("click",function(){const c=t.eBV(e).$implicit,u=t.XpG();return t.Njj(u.deleteAgenda(c))}),t.j41(10,"span"),t.EFF(11,"Delete"),t.k0s()()()()}if(2&n){const e=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",e)}}function B(n,r){1&n&&t.nrm(0,"tr",29)}function U(n,r){if(1&n){const e=t.RV6();t.j41(0,"tr",30),t.bIt("click",function(){const c=t.eBV(e).$implicit,u=t.XpG();return t.Njj(u.updateAgenda(c))}),t.k0s()}}const J=function(){return["Agenda"]},L=function(){return[]},O=[{path:"",component:(()=>{class n{ngOnInit(){this.getAgenda()}get visibleColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}constructor(e,o){this.apiClient=e,this.dialog=o,this.dataSource=new l.I6([]),this.columns=[{name:"ID",property:"id",visible:!0,isModelProperty:!0},{name:"Cliente",property:"cliente",visible:!0,isModelProperty:!0},{name:"Fecha",property:"fecha",visible:!0,isModelProperty:!0},{name:"Hora",property:"hora",visible:!0,isModelProperty:!0},{name:"Descripcion",property:"descripcion",visible:!0,isModelProperty:!0},{name:"Estado",property:"estado",visible:!0,isModelProperty:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10}getAgenda(){this.apiClient.getRequest("/api/agenda").subscribe({next:e=>{this.dataSource.data=e,console.log(e)},error:e=>{console.error(e)}})}createAgenda(){console.info("Abre dialogo de creacion de Agenda"),this.dialog.open(v,{width:"400px"}).afterClosed().subscribe(e=>{e?(console.info("Al cerrar",e),e.fecha&&(e.fecha=(0,m.Yq)(e.fecha,"dd/MM/yyyy","en")),this.apiClient.postRequest("/api/agenda",e).subscribe({next:o=>{console.info("OK",o),this.getAgenda()},error:o=>{console.error("error",o)}}),console.info("Fin api call")):console.info("Cancelado"),console.info("Fin Metodo")})}updateAgenda(e){const o=(0,$.A)(e);console.info(o),this.dialog.open(v,{data:o,width:"400px"}).afterClosed().subscribe(i=>{i?(i.fecha&&(i.fecha=(0,m.Yq)(i.fecha,"dd/MM/yyyy","en")),this.apiClient.putRequest("/api/agenda",i.id,i).subscribe({next:c=>{this.getAgenda()},error:c=>{console.info(c)}})):console.info("Cancelado")})}deleteAgenda(e){console.info("deleteAgenda",e),this.apiClient.deleteRequest(e.id,"/api/agenda").subscribe({next:o=>{this.getAgenda()},error:o=>{console.info(o)}})}onFilterChange(e){console.info(event),this.dataSource&&(e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e)}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(E.f),t.rXU(d.bZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["fury-agenda"]],decls:20,vars:9,consts:[["mode","card"],["current","Agenda",3,"crumbs"],["name","Citas",3,"columns","filterChange"],[1,"actions"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"fury-page-layout",0)(1,"fury-page-layout-header"),t.nrm(2,"fury-breadcrumbs",1),t.k0s(),t.j41(3,"fury-page-layout-content")(4,"fury-list",2),t.bIt("filterChange",function(u){return i.onFilterChange(u)}),t.j41(5,"div",3)(6,"button",4),t.bIt("click",function(){return i.createAgenda()}),t.j41(7,"mat-icon"),t.EFF(8,"add"),t.k0s()()(),t.j41(9,"table",5),t.qex(10,6),t.DNE(11,S,2,0,"th",7),t.DNE(12,Y,2,0,"td",8),t.bVm(),t.DNE(13,X,2,1,"ng-container",9),t.qex(14,10),t.DNE(15,H,1,0,"th",11),t.DNE(16,w,12,1,"td",8),t.bVm(),t.DNE(17,B,1,0,"tr",12),t.DNE(18,U,1,0,"tr",13),t.k0s(),t.nrm(19,"mat-paginator",14),t.k0s()()()),2&o&&(t.R7$(2),t.Y8G("crumbs",t.lJ4(7,J)),t.R7$(2),t.Y8G("columns",t.lJ4(8,L)),t.R7$(5),t.Y8G("dataSource",i.dataSource),t.R7$(4),t.Y8G("ngForOf",i.columns),t.R7$(4),t.Y8G("matHeaderRowDef",i.visibleColumns),t.R7$(1),t.Y8G("matRowDefColumns",i.visibleColumns),t.R7$(1),t.Y8G("pageSize",i.pageSize))},dependencies:[m.Sq,m.bT,_.m,G.s,f.iY,f.$0,F.So,x.An,g.kk,g.fb,g.Cp,j.iy,C.B4,C.aE,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,M.T,T.M,N.M]})}}return n})()}];let Z=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[y.iI.forChild(O),y.iI]})}}return n})();var K=a(3632),Q=a(91398),W=a(49320);let q=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[m.MD,p.w2,f.Hl,d.hM,h.RG,A.fS,s.X1]})}}return n})(),tt=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[m.MD,Z,K.V,Q.H,f.Hl,F.g7,x.m_,g.Cn,j.Ou,C.NQ,l.tP,W.S,q]})}}return n})()}}]);