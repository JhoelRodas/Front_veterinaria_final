"use strict";(self.webpackChunkfury=self.webpackChunkfury||[]).push([[533],{74061:(M,b,a)=>{a.d(b,{m:()=>E});var e=a(17705),_=a(60177),s=a(99213),i=a(52920),u=a(18498);function f(d,x){if(1&d&&(e.j41(0,"div",7)(1,"mat-icon",5),e.EFF(2,"chevron_right"),e.k0s(),e.j41(3,"div",6),e.EFF(4),e.k0s()()),2&d){const C=x.$implicit;e.R7$(4),e.JRh(C)}}const t=function(){return["/"]};let E=(()=>{class d{constructor(){this.crumbs=[]}ngOnInit(){}static{this.\u0275fac=function(y){return new(y||d)}}static{this.\u0275cmp=e.VBU({type:d,selectors:[["fury-breadcrumbs"]],inputs:{current:"current",crumbs:"crumbs"},decls:11,vars:5,consts:[[1,"title"],["fxLayout","row","fxLayoutAlign","start center",1,"crumbs"],[1,"crumb","home",3,"routerLink"],["class","crumb","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb","current"],[1,"chevron"],[1,"link"],["fxLayout","row","fxLayoutAlign","start center",1,"crumb"]],template:function(y,F){1&y&&(e.j41(0,"div",0),e.EFF(1),e.k0s(),e.j41(2,"div",1)(3,"a",2),e.EFF(4,"Home"),e.k0s(),e.DNE(5,f,5,1,"div",3),e.j41(6,"div",4)(7,"mat-icon",5),e.EFF(8,"chevron_right"),e.k0s(),e.j41(9,"div",6),e.EFF(10),e.k0s()()()),2&y&&(e.R7$(1),e.JRh(F.current),e.R7$(2),e.Y8G("routerLink",e.lJ4(4,t)),e.R7$(2),e.Y8G("ngForOf",F.crumbs),e.R7$(5),e.JRh(F.current))},dependencies:[_.Sq,s.An,i.DJ,i.sA,u.Wk],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{font:var(--font-title);font-weight:400}.crumb[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]{text-decoration:none;transition:color .4s cubic-bezier(.25,.8,.25,1);font:var(--font-body-1)}.link[_ngcontent-%COMP%]{cursor:pointer}.chevron[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-left:6px;margin-right:6px;-webkit-user-select:none;user-select:none;cursor:default}"]})}}return d})()},75063:(M,b,a)=>{a.d(b,{s:()=>G});var e=a(17705),_=a(33726),s=a(23294),i=a(70152),u=a(60177),f=a(99213),t=a(88834),E=a(59115),d=a(82765),x=a(52920),C=a(89417);const y=["filter"];function F(v,T){if(1&v&&(e.j41(0,"div",5)(1,"div",6),e.EFF(2),e.k0s(),e.j41(3,"div",7)(4,"mat-icon",8),e.EFF(5,"search"),e.k0s(),e.nrm(6,"input",9,10),e.k0s(),e.j41(8,"button",11)(9,"mat-icon"),e.EFF(10,"filter_list"),e.k0s()(),e.SdG(11,1),e.k0s()),2&v){const p=e.XpG(),h=e.sdS(3);e.R7$(2),e.JRh(p.name),e.R7$(6),e.Y8G("matMenuTriggerFor",h)}}function L(v,T){if(1&v){const p=e.RV6();e.j41(0,"div",12),e.bIt("click",function(D){const P=e.eBV(p).$implicit,S=e.XpG();return e.Njj(S.toggleColumnVisibility(P,D))}),e.j41(1,"mat-checkbox",13,14),e.bIt("ngModelChange",function(D){const P=e.eBV(p).$implicit;return e.Njj(P.visible=D)})("click",function(D){return D.stopPropagation()}),e.EFF(3),e.k0s()()}if(2&v){const p=T.$implicit;e.R7$(1),e.Y8G("ngModel",p.visible),e.R7$(2),e.SpI(" ",p.name," ")}}const O=["*",[["",8,"actions"]]],A=["*",".actions"];let G=(()=>{class v{constructor(p){this.cd=p,this.filterChange=new e.bkB}ngAfterViewInit(){this.hideHeader||(0,_.R)(this.filter.nativeElement,"keyup").pipe((0,s.F)(),(0,i.B)(150)).subscribe(()=>{this.filterChange.emit(this.filter.nativeElement.value)})}toggleColumnVisibility(p,h){h.stopPropagation(),h.stopImmediatePropagation(),p.visible=!p.visible,this.cd.markForCheck()}static{this.\u0275fac=function(h){return new(h||v)(e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:v,selectors:[["fury-list"]],viewQuery:function(h,D){if(1&h&&e.GBs(y,5),2&h){let k;e.mGM(k=e.lsd())&&(D.filter=k.first)}},inputs:{name:"name",columns:"columns",hideHeader:"hideHeader"},outputs:{filterChange:"filterChange"},ngContentSelectors:A,decls:6,vars:2,consts:[[1,"fury-list-table"],["class","fury-list-header","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",4,"ngIf"],["yPosition","below","xPosition","before"],["columnFilter","matMenu"],["class","checkbox-item mat-menu-item",3,"click",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxLayoutGap.gt-xs","24px",1,"fury-list-header"],[1,"fury-list-name"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],[1,"fury-filter-input-icon"],["fxFlex","","placeholder","Search\u2026",1,"fury-filter-input"],["filter",""],["type","button","mat-icon-button","",1,"fury-column-filter",3,"matMenuTriggerFor"],[1,"checkbox-item","mat-menu-item",3,"click"],[1,"checkbox",3,"ngModel","ngModelChange","click"],["checkbox",""]],template:function(h,D){1&h&&(e.NAR(O),e.j41(0,"div",0),e.DNE(1,F,12,2,"div",1),e.j41(2,"mat-menu",2,3),e.DNE(4,L,4,2,"div",4),e.k0s(),e.SdG(5),e.k0s()),2&h&&(e.R7$(1),e.Y8G("ngIf",!D.hideHeader),e.R7$(3),e.Y8G("ngForOf",D.columns))},dependencies:[u.Sq,u.bT,f.An,t.iY,E.kk,E.Cp,d.So,x.DJ,x.BO,x.sA,x.UI,C.BC,C.vS],styles:[".fury-list-table{display:flex;flex-direction:column}.fury-list-table .fury-list-header{padding-left:24px;padding-right:24px;height:64px;border-top-left-radius:8px;border-top-right-radius:8px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header{height:auto;padding-top:24px;padding-bottom:24px}}.fury-list-table .fury-list-header .fury-list-name{font-size:20px;line-height:32px;font-weight:500;padding-right:24px}@media screen and (max-width: 599px){.fury-list-table .fury-list-header .fury-list-name{border-right:none}}.fury-list-table .fury-list-header .fury-filter-input{font-size:16px;line-height:1.125;border:none;height:32px}.fury-list-table .fury-list-header .fury-filter-input:focus{outline:none}.fury-list-table .fury-list-header .fury-filter-input-icon{width:1.2em;vertical-align:bottom;height:22px;font-size:22px;margin-right:8px}.fury-list-table table{width:100%}.fury-list-table .mat-mdc-header-row .mat-mdc-header-cell .mat-sort-header-button{text-transform:uppercase}.fury-list-table .mat-mdc-cell.image-cell,.fury-list-table .mat-mdc-header-cell.image-cell{flex:0;width:59px}.fury-list-table .mat-mdc-cell.image-cell img,.fury-list-table .mat-mdc-header-cell.image-cell img{border-radius:50%;height:35px;width:35px;margin-right:24px;vertical-align:middle}.fury-list-table .mat-mdc-cell,.fury-list-table .mat-mdc-header-cell{white-space:nowrap;padding-left:12px;padding-right:12px}.fury-list-table .mat-mdc-cell.actions-cell,.fury-list-table .mat-mdc-header-cell.actions-cell{flex:0;width:40px;overflow:visible}.fury-list-table .paginator{display:block}.checkbox-item{padding-right:32px;padding-left:8px}\n"],encapsulation:2})}}return v})()},91398:(M,b,a)=>{a.d(b,{H:()=>u});var e=a(60177),_=a(89417),s=a(12198),i=a(17705);let u=(()=>{class f{static{this.\u0275fac=function(d){return new(d||f)}}static{this.\u0275mod=i.$C({type:f})}static{this.\u0275inj=i.G2t({imports:[e.MD,s.G,_.YN]})}}return f})()},15551:(M,b,a)=>{a.d(b,{M:()=>_});var e=a(17705);let _=(()=>{class s{constructor(){}static{this.\u0275fac=function(f){return new(f||s)}}static{this.\u0275dir=e.FsC({type:s,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]})}}return s})()},53007:(M,b,a)=>{a.d(b,{M:()=>_});var e=a(17705);let _=(()=>{class s{constructor(){}static{this.\u0275fac=function(f){return new(f||s)}}static{this.\u0275dir=e.FsC({type:s,selectors:[["","furyPageLayoutHeader",""],["fury-page-layout-header"]],hostAttrs:[1,"fury-page-layout-header"]})}}return s})()},43655:(M,b,a)=>{a.d(b,{T:()=>_});var e=a(17705);let _=(()=>{class s{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}static{this.\u0275fac=function(f){return new(f||s)}}static{this.\u0275dir=e.FsC({type:s,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(f,t){2&f&&e.AVh("fury-page-layout-card",t.isCard)("fury-page-layout-simple",t.isSimple)},inputs:{mode:"mode"}})}}return s})()},95533:(M,b,a)=>{a.r(b),a.d(b,{VentaModule:()=>Ft});var e=a(60177),_=a(18498),s=a(9159),i=a(89417),u=a(34006),f=a(2578),t=a(17705),E=a(97405),d=a(52920),x=a(99631),C=a(86467),y=a(88834);function F(o,c){1&o&&(t.j41(0,"th",21),t.EFF(1," Producto "),t.k0s())}function L(o,c){if(1&o&&(t.j41(0,"td",22),t.EFF(1),t.k0s()),2&o){const n=c.$implicit;t.R7$(1),t.SpI(" ",n.idProducto," ")}}function O(o,c){1&o&&(t.j41(0,"th",21),t.EFF(1," Servicio "),t.k0s())}function A(o,c){if(1&o&&(t.j41(0,"td",22),t.EFF(1),t.k0s()),2&o){const n=c.$implicit;t.R7$(1),t.SpI(" ",n.idServicio," ")}}function G(o,c){1&o&&(t.j41(0,"th",21),t.EFF(1," Cantidad "),t.k0s())}function v(o,c){if(1&o&&(t.j41(0,"td",22),t.EFF(1),t.k0s()),2&o){const n=c.$implicit;t.R7$(1),t.SpI(" ",n.cant," ")}}function T(o,c){1&o&&(t.j41(0,"th",21),t.EFF(1," Monto "),t.k0s())}function p(o,c){if(1&o&&(t.j41(0,"td",22),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const n=c.$implicit;t.R7$(1),t.SpI(" ",t.bMT(2,1,n.monto)," ")}}function h(o,c){1&o&&t.nrm(0,"tr",23)}function D(o,c){1&o&&t.nrm(0,"tr",24)}let k=(()=>{class o{constructor(n,r,l){this.data=n,this.dialogRef=r,this.apiClient=l,this.detalles=[],this.dataSource=new s.I6([]),this.displayedColumns=["idProducto","idServicio","cant","monto"]}ngOnInit(){this.form=new i.J3({id:new i.hs(this.data.id),ci:new i.hs(this.data.ci),nombre:new i.hs(this.data.nombre),fecha:new i.hs(this.data.fecha),montoTotal:new i.hs(this.data.montoTotal),metodoPago:new i.hs(this.data.metodoPago)}),console.log("idRecibo",this.data.id),this.apiClient.getRequest("/api/recibo/getRecibo",{id:this.data.id}).subscribe({next:n=>{console.info("ReciboCompleto",n),this.dataSource.data=[...n.detalles,...n.detallesServicios]},error:n=>{console.error(n)}})}descargarPDF(){this.apiClient.getRequest("/api/recibo/download-pdf",{id:this.data.id}).subscribe({next:n=>{if(n&&n.pdf){const r=atob(n.pdf),l=new Uint8Array(r.length);for(let g=0;g<r.length;g++)l[g]=r.charCodeAt(g);const m=new Blob([l],{type:"application/pdf"});(0,f.saveAs)(m,`nota_compra_${this.data.id}.pdf`)}else console.error("Error: el PDF no contiene datos."),alert("No se pudo generar el PDF. Int\xe9ntalo de nuevo m\xe1s tarde.")},error:n=>{console.error("Error al descargar el PDF",n),alert("Ocurri\xf3 un error al intentar descargar el PDF.")}})}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(u.Vh),t.rXU(u.CP),t.rXU(E.f))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["fury-crear-actualizar-detalles"]],decls:50,vars:4,consts:[["mat-dialog-title",""],[3,"formGroup"],["fxLayout","column wrap"],["fxFlex",""],["matInput","","formControlName","id","readonly",""],["matInput","","formControlName","ci","readonly",""],["matInput","","formControlName","nombre","readonly",""],["matInput","","formControlName","fecha","readonly",""],["matInput","","formControlName","montoTotal","readonly",""],["matInput","","formControlName","metodoPago","readonly",""],[2,"text-align","right","margin-top","15px"],["mat-raised-button","","color","primary",3,"click"],["mat-table","",1,"mat-elevation-z8",2,"width","100%","margin-top","20px",3,"dataSource"],["matColumnDef","idProducto"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","idServicio"],["matColumnDef","cant"],["matColumnDef","monto"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(r,l){1&r&&(t.j41(0,"div",0),t.EFF(1," Informacion Completa del Recibo "),t.k0s(),t.j41(2,"form",1)(3,"mat-dialog-content")(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"id"),t.k0s(),t.nrm(8,"input",4),t.k0s(),t.j41(9,"mat-form-field",3)(10,"mat-label"),t.EFF(11,"ci"),t.k0s(),t.nrm(12,"input",5),t.k0s(),t.j41(13,"mat-form-field",3)(14,"mat-label"),t.EFF(15,"nombre"),t.k0s(),t.nrm(16,"input",6),t.k0s(),t.j41(17,"mat-form-field",3)(18,"mat-label"),t.EFF(19,"fecha"),t.k0s(),t.nrm(20,"input",7),t.k0s(),t.j41(21,"mat-form-field",3)(22,"mat-label"),t.EFF(23,"montoTotal"),t.k0s(),t.nrm(24,"input",8),t.k0s(),t.j41(25,"mat-form-field",3)(26,"mat-label"),t.EFF(27,"metodoPago"),t.k0s(),t.nrm(28,"input",9),t.k0s()(),t.j41(29,"div",10)(30,"button",11),t.bIt("click",function(){return l.closeDialog()}),t.EFF(31,"Cerrar"),t.k0s()(),t.j41(32,"div",10)(33,"button",11),t.bIt("click",function(){return l.descargarPDF()}),t.EFF(34,"Descargar"),t.k0s()(),t.j41(35,"table",12),t.qex(36,13),t.DNE(37,F,2,0,"th",14),t.DNE(38,L,2,1,"td",15),t.bVm(),t.qex(39,16),t.DNE(40,O,2,0,"th",14),t.DNE(41,A,2,1,"td",15),t.bVm(),t.qex(42,17),t.DNE(43,G,2,0,"th",14),t.DNE(44,v,2,1,"td",15),t.bVm(),t.qex(45,18),t.DNE(46,T,2,0,"th",14),t.DNE(47,p,3,3,"td",15),t.bVm(),t.DNE(48,h,1,0,"tr",19),t.DNE(49,D,1,0,"tr",20),t.k0s()()()),2&r&&(t.R7$(2),t.Y8G("formGroup",l.form),t.R7$(33),t.Y8G("dataSource",l.dataSource),t.R7$(13),t.Y8G("matHeaderRowDef",l.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",l.displayedColumns))},dependencies:[i.qT,i.me,i.BC,i.cb,i.j4,i.JD,d.DJ,d.UI,u.BI,u.Yi,x.fg,C.rl,C.nJ,y.$z,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,e.oe]})}}return o})();var P=a(17206),S=a(97586),j=a.n(S),N=a(86600),I=a(82798),R=a(25084),V=a(82765);function U(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Fecha de inicio inv\xe1lida"),t.k0s())}function z(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1,"Fecha de fin inv\xe1lida"),t.k0s())}function J(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," El monto debe ser mayor o igual a 0. "),t.k0s())}function K(o,c){1&o&&(t.j41(0,"mat-error"),t.EFF(1," El monto debe ser mayor o igual a 0. "),t.k0s())}function W(o,c){if(1&o&&(t.j41(0,"mat-option",19),t.EFF(1),t.k0s()),2&o){const n=c.$implicit;t.Y8G("value",n.nombre),t.R7$(1),t.SpI(" ",n.nombre," ")}}function X(o,c){if(1&o){const n=t.RV6();t.j41(0,"div",20)(1,"mat-checkbox",21),t.bIt("ngModelChange",function(l){const g=t.eBV(n).$implicit;return t.Njj(g.selected=l)}),t.EFF(2),t.k0s()()}if(2&o){const n=c.$implicit;t.Y8G("hidden",!n.visible||"actions"===n.property),t.R7$(1),t.Y8G("ngModel",n.selected),t.R7$(1),t.SpI(" ",n.name," ")}}let H=(()=>{class o{constructor(n,r){this.dialogRef=n,this.data=r,this.columns=r.columns,this.metodosDePago=r.metodosDePago,this.form=new i.gE({from:new i.MJ(j()().subtract(10,"days").toDate()),to:new i.MJ(j()().toDate()),montoMayor:new i.MJ(null,[i.k0.min(0),i.k0.pattern(/^\d+(\.\d{1,2})?$/)]),montoMenor:new i.MJ(null,[i.k0.min(0),i.k0.pattern(/^\d+(\.\d{1,2})?$/)]),metodoPago:new i.MJ(null)})}ngOnInit(){}formatDecimals(n){const r=this.form.get(n);null!=r?.value&&""!==r.value&&r.setValue(parseFloat(r.value).toFixed(2))}generateReport(){const n=this.columns.filter(m=>m.selected).map(({name:m,property:g})=>({name:m,property:g}));if(0===n.length)return void alert("Debe seleccionar al menos una cabecera para el reporte.");const l={filtros:{inicio:this.form.value.from?(0,e.Yq)(this.form.value.from,"dd/MM/yyyy","en"):null,fin:this.form.value.to?(0,e.Yq)(this.form.value.to,"dd/MM/yyyy","en"):null,montoMayor:this.form.value.montoMayor,montoMenor:this.form.value.montoMenor,metodoPago:this.form.value.metodoPago},headers:n,tipoReporte:"Ventas"};this.dialogRef.close(l)}closeDialog(){this.dialogRef.close(null)}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(u.CP),t.rXU(u.Vh))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["fury-crear-reporte-venta"]],decls:41,vars:9,consts:[["mat-dialog-title",""],["fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start start",3,"formGroup"],["fxFlex","100","fxFlex.xs","100"],[3,"rangePicker"],["matStartDate","","formControlName","from","placeholder","Inicio"],["matEndDate","","formControlName","to","placeholder","Fin"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["fxFlex","50","fxFlex.xs","100"],["matInput","","type","number","formControlName","montoMayor","placeholder","Ingrese monto mayor","min","0","step","1",3,"input","blur"],["matInput","","type","number","formControlName","montoMenor","placeholder","Ingrese monto menor","min","0","step","1",3,"input","blur"],["formControlName","metodoPago"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start start",1,"checkbox-container"],["fxFlex","25%",3,"hidden",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","mat-dialog-close",""],[3,"value"],["fxFlex","25%",3,"hidden"],[3,"ngModel","ngModelChange"]],template:function(r,l){if(1&r&&(t.j41(0,"h2",0),t.EFF(1,"Generar Reporte"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"h3"),t.EFF(4,"Filtros del Reporte"),t.k0s(),t.j41(5,"div",1)(6,"mat-form-field",2)(7,"mat-label"),t.EFF(8,"Rango de fecha"),t.k0s(),t.j41(9,"mat-date-range-input",3),t.nrm(10,"input",4)(11,"input",5),t.k0s(),t.nrm(12,"mat-datepicker-toggle",6)(13,"mat-date-range-picker",null,7),t.DNE(15,U,2,0,"mat-error",8),t.DNE(16,z,2,0,"mat-error",8),t.k0s(),t.j41(17,"mat-form-field",9)(18,"mat-label"),t.EFF(19,"Monto Mayor"),t.k0s(),t.j41(20,"input",10),t.bIt("input",function(){return l.formatDecimals("montoMayor")})("blur",function(){return l.formatDecimals("montoMayor")}),t.k0s(),t.DNE(21,J,2,0,"mat-error",8),t.k0s(),t.j41(22,"mat-form-field",9)(23,"mat-label"),t.EFF(24,"Monto Menor"),t.k0s(),t.j41(25,"input",11),t.bIt("input",function(){return l.formatDecimals("montoMenor")})("blur",function(){return l.formatDecimals("montoMenor")}),t.k0s(),t.DNE(26,K,2,0,"mat-error",8),t.k0s(),t.j41(27,"mat-form-field",2)(28,"mat-label"),t.EFF(29,"Metodo de Pago"),t.k0s(),t.j41(30,"mat-select",12),t.DNE(31,W,2,2,"mat-option",13),t.k0s()()(),t.j41(32,"h3"),t.EFF(33,"Cabeceras del Reporte"),t.k0s(),t.j41(34,"div",14),t.DNE(35,X,3,3,"div",15),t.k0s()(),t.j41(36,"mat-dialog-actions",16)(37,"button",17),t.bIt("click",function(){return l.generateReport()}),t.EFF(38,"Generar"),t.k0s(),t.j41(39,"button",18),t.EFF(40,"Cancelar"),t.k0s()()),2&r){const m=t.sdS(14);t.R7$(5),t.Y8G("formGroup",l.form),t.R7$(4),t.Y8G("rangePicker",m),t.R7$(3),t.Y8G("for",m),t.R7$(3),t.Y8G("ngIf",l.form.controls.from.hasError("matStartDateInvalid")),t.R7$(1),t.Y8G("ngIf",l.form.controls.to.hasError("matEndDateInvalid")),t.R7$(5),t.Y8G("ngIf",l.form.controls.montoMayor.hasError("min")),t.R7$(5),t.Y8G("ngIf",l.form.controls.montoMenor.hasError("min")),t.R7$(5),t.Y8G("ngForOf",l.metodosDePago),t.R7$(4),t.Y8G("ngForOf",l.columns)}},dependencies:[e.Sq,e.bT,d.DJ,d.BO,d.sA,d.UI,y.$z,u.tx,u.BI,u.Yi,u.E7,C.rl,C.nJ,C.TL,C.yw,x.fg,i.me,i.Q0,i.BC,i.cb,i.VZ,i.j4,i.JD,N.wT,I.VO,R.bU,R.el,R.xR,R.IG,R.SG,i.vS,V.So]})}}return o})();var Z=a(74061),Q=a(75063),B=a(99213),$=a(59115),Y=a(96695),w=a(2042),q=a(43655),tt=a(53007),et=a(15551);function ot(o,c){if(1&o){const n=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(n);const l=t.XpG();return t.Njj(l.generarReporte())}),t.EFF(1," Generar Reporte "),t.k0s()}}function nt(o,c){1&o&&(t.j41(0,"th",18)(1,"mat-checkbox",19),t.bIt("click",function(r){return r.stopPropagation()}),t.k0s()())}function at(o,c){1&o&&(t.j41(0,"td",20)(1,"mat-checkbox",19),t.bIt("click",function(r){return r.stopPropagation()}),t.k0s()())}function rt(o,c){if(1&o&&(t.j41(0,"th",25),t.EFF(1),t.k0s()),2&o){const n=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",n.name,"")}}function it(o,c){if(1&o&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&o){const n=c.$implicit,r=t.XpG(2).$implicit;t.R7$(1),t.SpI(" ",n[r.property]," ")}}function lt(o,c){if(1&o&&(t.qex(0,22),t.DNE(1,rt,2,1,"th",23),t.DNE(2,it,2,1,"td",24),t.bVm()),2&o){const n=t.XpG().$implicit;t.Y8G("matColumnDef",n.property)}}function st(o,c){if(1&o&&(t.qex(0),t.DNE(1,lt,3,1,"ng-container",21),t.bVm()),2&o){const n=c.$implicit;t.R7$(1),t.Y8G("ngIf",n.isModelProperty)}}function ct(o,c){1&o&&t.nrm(0,"th",27)}function mt(o,c){if(1&o){const n=t.RV6();t.j41(0,"td",20)(1,"button",28),t.bIt("click",function(l){return l.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_horiz"),t.k0s()(),t.j41(4,"mat-menu",29,30)(6,"button",31),t.bIt("click",function(){const m=t.eBV(n).$implicit,g=t.XpG();return t.Njj(g.verDetalles(m))}),t.j41(7,"span"),t.EFF(8,"Ver Detalles"),t.k0s()(),t.j41(9,"button",31),t.bIt("click",function(){const m=t.eBV(n).$implicit,g=t.XpG();return t.Njj(g.anularRecibo(m))}),t.j41(10,"span"),t.EFF(11,"Anular"),t.k0s()()()()}if(2&o){const n=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",n)}}function ut(o,c){1&o&&t.nrm(0,"tr",32)}function dt(o,c){if(1&o){const n=t.RV6();t.j41(0,"tr",33),t.bIt("click",function(){const m=t.eBV(n).$implicit,g=t.XpG();return t.Njj(g.verDetalles(m))}),t.k0s()}}const ft=function(){return["Recibos"]},pt=function(){return[]},ht=[{path:"",component:(()=>{class o{constructor(n,r,l){this.apiClient=n,this.dialog=r,this.router=l,this.metodosDePago=[{value:"todos",label:"Todos"},{value:"efectivo",label:"Efectivo"},{value:"qr",label:"QR"}],this.dataSource=new s.I6([]),this.columns=[{name:"ID",property:"id",visible:!0,isModelProperty:!0,selected:!0},{name:"Cliente",property:"nombre",visible:!0,isModelProperty:!0,selected:!0},{name:"Ci",property:"ci",visible:!0,isModelProperty:!0,selected:!0},{name:"Fecha",property:"fecha",visible:!0,isModelProperty:!0,selected:!0},{name:"Monto Total",property:"montoTotal",visible:!0,isModelProperty:!0,selected:!0},{name:"Metodo de pago",property:"metodoPago",visible:!0,isModelProperty:!0,selected:!0},{name:"Actions",property:"actions",visible:!0}],this.pageSize=10,this.userActions={},this.successActionList=m=>{this.userActions=m},this.form=new i.gE({from:new i.MJ(j()().subtract(10,"days").toDate()),to:new i.MJ(j()().toDate()),montoMayor:new i.MJ(null,[i.k0.min(0),i.k0.pattern(/^\d+(\.\d{1,2})?$/)]),montoMenor:new i.MJ(null,[i.k0.min(0),i.k0.pattern(/^\d+(\.\d{1,2})?$/)]),metodoPago:new i.MJ(null)})}get visibleColumns(){return this.columns.filter(n=>n.visible).map(n=>n.property)}ngOnInit(){this.getRecibos(),this.apiClient.getRequest("/api/v1/resource/actions-by-user?frontendCode=PAGE_VENTA").subscribe({next:this.successActionList})}formatDecimals(n){const r=this.form.get(n);null!=r?.value&&""!==r.value&&r.setValue(parseFloat(r.value).toFixed(2))}onFilterChange(n){console.info(event),this.dataSource&&(n=(n=n.trim()).toLowerCase(),this.dataSource.filter=n)}getRecibos(){this.apiClient.getRequest("/api/recibo").subscribe({next:n=>{this.dataSource.data=n,console.log(n)},error:n=>{console.error(n)}})}createRecibo(){this.router.navigate(["/detallesVenta"]).then(()=>{this.getRecibos()})}generarReporte(){this.dialog.open(H,{width:"600px",data:{columns:this.columns,metodoPago:this.metodosDePago}}).afterClosed().subscribe(n=>{n&&(console.log("Datos para el reporte:",n),this.apiClient.postRequest("/api/reporte/generar-excel",n).subscribe({next:r=>{console.log(r),P.R.downloadFromBase64(r.base64Archivo,"excel.xlsx",r.tipoRespaldo)}}))})}anularRecibo(n){this.apiClient.deleteRequest(n.id,"/api/recibo").subscribe({next:r=>{this.getRecibos()},error:r=>{}})}verDetalles(n){console.info(n),this.dialog.open(k,{data:n,width:"400px"})}static{this.\u0275fac=function(r){return new(r||o)(t.rXU(E.f),t.rXU(u.bZ),t.rXU(_.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["fury-venta"]],decls:22,vars:10,consts:[["mode","card"],["current","Recibo",3,"crumbs"],["name","Recibo",3,"columns","filterChange"],[1,"actions"],["fxLayout","row","fxLayoutGap","16px"],["type","button","mat-mini-fab","","color","primary",1,"create",3,"click"],["class","generarReporte","type","button","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","checkbox"],["class","actions-cell","mat-header-cell","",4,"matHeaderCellDef"],["class","actions-cell","mat-cell","",4,"matCellDef"],[4,"ngFor","ngForOf"],["matColumnDef","actions"],["class","actions-cell","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","clickable route-animations-elements","mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"paginator",3,"pageSize"],["type","button","mat-raised-button","","color","primary",1,"generarReporte",3,"click"],["mat-header-cell","",1,"actions-cell"],["color","primary",3,"click"],["mat-cell","",1,"actions-cell"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"actions-cell"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",1,"clickable","route-animations-elements",3,"click"]],template:function(r,l){1&r&&(t.j41(0,"fury-page-layout",0)(1,"fury-page-layout-header"),t.nrm(2,"fury-breadcrumbs",1),t.k0s(),t.j41(3,"fury-page-layout-content")(4,"fury-list",2),t.bIt("filterChange",function(g){return l.onFilterChange(g)}),t.j41(5,"div",3)(6,"div",4)(7,"button",5),t.bIt("click",function(){return l.createRecibo()}),t.j41(8,"mat-icon"),t.EFF(9,"add"),t.k0s()(),t.DNE(10,ot,2,0,"button",6),t.k0s()(),t.j41(11,"table",7),t.qex(12,8),t.DNE(13,nt,2,0,"th",9),t.DNE(14,at,2,0,"td",10),t.bVm(),t.DNE(15,st,2,1,"ng-container",11),t.qex(16,12),t.DNE(17,ct,1,0,"th",13),t.DNE(18,mt,12,1,"td",10),t.bVm(),t.DNE(19,ut,1,0,"tr",14),t.DNE(20,dt,1,0,"tr",15),t.k0s(),t.nrm(21,"mat-paginator",16),t.k0s()()()),2&r&&(t.R7$(2),t.Y8G("crumbs",t.lJ4(8,ft)),t.R7$(2),t.Y8G("columns",t.lJ4(9,pt)),t.R7$(6),t.Y8G("ngIf",l.userActions.toExcelAction),t.R7$(1),t.Y8G("dataSource",l.dataSource),t.R7$(4),t.Y8G("ngForOf",l.columns),t.R7$(4),t.Y8G("matHeaderRowDef",l.visibleColumns),t.R7$(1),t.Y8G("matRowDefColumns",l.visibleColumns),t.R7$(1),t.Y8G("pageSize",l.pageSize))},dependencies:[e.Sq,e.bT,Z.m,d.DJ,d.BO,Q.s,y.$z,y.iY,y.$0,V.So,B.An,$.kk,$.fb,$.Cp,Y.iy,w.B4,w.aE,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,q.T,tt.M,et.M],styles:['@charset "UTF-8";.checkbox-container[_ngcontent-%COMP%]{margin-top:16px}mat-form-field[_ngcontent-%COMP%]{margin-bottom:16px}@media (max-width: 600px){[fxFlex="33%"][_ngcontent-%COMP%]{flex:0 0 100%}[fxFlex="25%"][_ngcontent-%COMP%]{flex:0 0 50%}}']})}}return o})()}];let gt=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[_.iI.forChild(ht),_.iI]})}}return o})();var _t=a(3632),Ct=a(91398),yt=a(49320),bt=a(14823),xt=a(26924),vt=a(5951);let Dt=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[e.MD,i.YN,i.X1,xt.YF,u.hM,x.fS,y.Hl,B.m_,vt.Wk,I.Ve,s.tP]})}}return o})(),Et=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[e.MD,d.w2,y.Hl,u.hM,C.RG,x.fS,i.X1,N.Sy,I.Ve,R.X6,i.YN,V.g7]})}}return o})(),Ft=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[e.MD,gt,_t.V,d.w2,Ct.H,y.Hl,V.g7,R.X6,C.RG,B.m_,$.Cn,N.Sy,Y.Ou,I.Ve,w.NQ,s.tP,yt.S,i.X1,bt.uc,Dt,x.fS,i.YN,Et]})}}return o})()}}]);